{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { createTour as tourRoute } from '../../api';\nimport { formatError } from \".\";\nconst initialState = {\n  loading: false,\n  error: \"\"\n};\nexport const createTour = createAsyncThunk(\"/tours/create\", async (tourParams, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  const {\n    title,\n    tags,\n    description,\n    imageFile\n  } = tourParams;\n\n  try {\n    const response = await tourRoute({\n      title,\n      tags,\n      description,\n      imageFile\n    });\n    tourParams.toast.success(\"Tour created successfully\");\n    return response.data;\n  } catch (error) {\n    const err = rejectWithValue({\n      error: formatError(error)\n    });\n    console.log(err);\n    return err;\n  }\n});\nconst tourSlice = createSlice({\n  name: \"Tour\",\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(createTour.pending, state => {\n      console.log(\"tour pending\");\n      state.loading = true;\n      state.error = \"\";\n    });\n    builder.addCase(createTour.fulfilled, state => {\n      state.loading = false;\n    });\n    builder.addCase(createTour.rejected, (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      console.log(\"rejected error \", payload === null || payload === void 0 ? void 0 : payload.error);\n      state.error = payload ? payload.error : \"Something went wrong\";\n    });\n  }\n});\nexport default tourSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createTour","tourRoute","formatError","initialState","loading","error","tourParams","rejectWithValue","title","tags","description","imageFile","response","toast","success","data","err","console","log","tourSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","rejected","payload","reducer"],"sources":["/home/haziz1/react-projects/tourApp/app/client/src/states/reducers/tour-reducer.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { TourData } from \"../../../types\";\nimport { createTour as tourRoute } from '../../api';\nimport { toast } from 'react-toastify';\nimport { NavigateFunction } from 'react-router-dom';\nimport { formatError } from \".\";\n\n\ninterface TourState {\n    loading: boolean;\n    error: string;\n}\n\n\ninterface TourParams extends TourData {\n    toast: typeof toast;\n    navigate: NavigateFunction;\n}\n\n\nconst initialState: TourState = {\n    loading: false,\n    error: \"\",\n}\n\n\nexport const createTour = createAsyncThunk<TourState, TourParams, { rejectValue: { error: string } }>(\n    \"/tours/create\",\n    async (tourParams: TourParams, { rejectWithValue }) => {\n        const { title, tags, description, imageFile } = tourParams;\n        try {\n            const response = await tourRoute({ title, tags, description, imageFile });\n            tourParams.toast.success(\"Tour created successfully\");\n            return response.data as TourState;\n        } catch (error) {\n            const err = rejectWithValue({ error: formatError(error) });\n            console.log(err);\n            return err;\n        }\n    }\n);\n\n\nconst tourSlice = createSlice({\n    name: \"Tour\",\n    initialState,\n    reducers: {},\n    extraReducers: (builder) => {\n        builder.addCase(createTour.pending, (state: TourState) => {\n            console.log(\"tour pending\")\n            state.loading = true;\n            state.error = \"\";\n        });\n\n        builder.addCase(createTour.fulfilled, (state: TourState) => {\n            state.loading = false;\n        });\n\n        builder.addCase(createTour.rejected, (state: TourState, { payload }) => {\n            console.log(\"rejected error \", payload?.error);\n            state.error = payload ? payload.error : \"Something went wrong\";\n        });\n    }\n});\n\n\nexport default tourSlice.reducer;"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AAEA,SAASC,UAAU,IAAIC,SAAvB,QAAwC,WAAxC;AAGA,SAASC,WAAT,QAA4B,GAA5B;AAeA,MAAMC,YAAuB,GAAG;EAC5BC,OAAO,EAAE,KADmB;EAE5BC,KAAK,EAAE;AAFqB,CAAhC;AAMA,OAAO,MAAML,UAAU,GAAGF,gBAAgB,CACtC,eADsC,EAEtC,OAAOQ,UAAP,WAAuD;EAAA,IAAxB;IAAEC;EAAF,CAAwB;EACnD,MAAM;IAAEC,KAAF;IAASC,IAAT;IAAeC,WAAf;IAA4BC;EAA5B,IAA0CL,UAAhD;;EACA,IAAI;IACA,MAAMM,QAAQ,GAAG,MAAMX,SAAS,CAAC;MAAEO,KAAF;MAASC,IAAT;MAAeC,WAAf;MAA4BC;IAA5B,CAAD,CAAhC;IACAL,UAAU,CAACO,KAAX,CAAiBC,OAAjB,CAAyB,2BAAzB;IACA,OAAOF,QAAQ,CAACG,IAAhB;EACH,CAJD,CAIE,OAAOV,KAAP,EAAc;IACZ,MAAMW,GAAG,GAAGT,eAAe,CAAC;MAAEF,KAAK,EAAEH,WAAW,CAACG,KAAD;IAApB,CAAD,CAA3B;IACAY,OAAO,CAACC,GAAR,CAAYF,GAAZ;IACA,OAAOA,GAAP;EACH;AACJ,CAbqC,CAAnC;AAiBP,MAAMG,SAAS,GAAGpB,WAAW,CAAC;EAC1BqB,IAAI,EAAE,MADoB;EAE1BjB,YAF0B;EAG1BkB,QAAQ,EAAE,EAHgB;EAI1BC,aAAa,EAAGC,OAAD,IAAa;IACxBA,OAAO,CAACC,OAAR,CAAgBxB,UAAU,CAACyB,OAA3B,EAAqCC,KAAD,IAAsB;MACtDT,OAAO,CAACC,GAAR,CAAY,cAAZ;MACAQ,KAAK,CAACtB,OAAN,GAAgB,IAAhB;MACAsB,KAAK,CAACrB,KAAN,GAAc,EAAd;IACH,CAJD;IAMAkB,OAAO,CAACC,OAAR,CAAgBxB,UAAU,CAAC2B,SAA3B,EAAuCD,KAAD,IAAsB;MACxDA,KAAK,CAACtB,OAAN,GAAgB,KAAhB;IACH,CAFD;IAIAmB,OAAO,CAACC,OAAR,CAAgBxB,UAAU,CAAC4B,QAA3B,EAAqC,CAACF,KAAD,YAAmC;MAAA,IAAhB;QAAEG;MAAF,CAAgB;MACpEZ,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BW,OAA/B,aAA+BA,OAA/B,uBAA+BA,OAAO,CAAExB,KAAxC;MACAqB,KAAK,CAACrB,KAAN,GAAcwB,OAAO,GAAGA,OAAO,CAACxB,KAAX,GAAmB,sBAAxC;IACH,CAHD;EAIH;AAnByB,CAAD,CAA7B;AAuBA,eAAec,SAAS,CAACW,OAAzB"},"metadata":{},"sourceType":"module"}