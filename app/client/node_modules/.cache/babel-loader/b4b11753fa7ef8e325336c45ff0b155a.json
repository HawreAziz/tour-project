{"ast":null,"code":"import { ActionTypes } from \"../action-types\";\nimport { signin as signinRoute } from '../../api';\nimport localforage from \"localforage\";\nexport const signin = signinParams => {\n  return async dispatch => {\n    dispatch({\n      type: ActionTypes.SIGNIN_LOADING\n    });\n\n    try {\n      const response = await signinRoute(signinParams);\n      console.log(response.data);\n      await localforage.setItem('profile', JSON.stringify(response.data));\n      signinParams.toast.success(\"Login Succesfully!\");\n      signinParams.navigate('/');\n      dispatch({\n        type: ActionTypes.SIGN_IN,\n        payload: response.data\n      });\n    } catch (err) {\n      if (!(err instanceof Error)) {\n        console.log(\"error undefined\");\n      }\n\n      console.log(err);\n      const error = err instanceof Error ? err.message : \"Could not contact server\";\n      dispatch({\n        type: ActionTypes.SIGNIN_ERROR,\n        payload: {\n          error\n        }\n      });\n      console.log(error);\n      signinParams.toast.error(\"Login failed\");\n    }\n  };\n};\nexport const signup = signupParams => {\n  return async dispatch => {\n    dispatch({\n      type: ActionTypes.SIGNUP_LOADING\n    });\n\n    try {\n      console.log(\"\");\n    } catch (err) {\n      console.log(\"TODO handle error\");\n    }\n  };\n};","map":{"version":3,"names":["ActionTypes","signin","signinRoute","localforage","signinParams","dispatch","type","SIGNIN_LOADING","response","console","log","data","setItem","JSON","stringify","toast","success","navigate","SIGN_IN","payload","err","Error","error","message","SIGNIN_ERROR","signup","signupParams","SIGNUP_LOADING"],"sources":["/home/haziz1/react-projects/tour-app/client/src/states/action-creators/index.ts"],"sourcesContent":["import { ActionTypes } from \"../action-types\";\nimport { SigninActions } from '../actions/signin-action';\nimport { SignupActions } from \"../actions/signup-action\";\nimport { signin as signinRoute } from '../../api'\nimport { Dispatch } from \"react\";\nimport localforage from \"localforage\";\nimport { NavigateFunction } from \"react-router-dom\";\nimport { toast as toastType } from \"react-toastify\";\n\n\ninterface AuthParams {\n    email: string;\n    password: string;\n    navigate: NavigateFunction;\n    toast: typeof toastType;\n}\n\nexport const signin = (signinParams: AuthParams) => {\n    return async (dispatch: Dispatch<SigninActions>) => {\n        dispatch({\n            type: ActionTypes.SIGNIN_LOADING,\n        });\n        try {\n            const response = await signinRoute(signinParams)\n            console.log(response.data);\n            await localforage.setItem('profile', JSON.stringify(response.data));\n            signinParams.toast.success(\"Login Succesfully!\");\n            signinParams.navigate('/');\n            dispatch({\n                type: ActionTypes.SIGN_IN,\n                payload: response.data\n            });\n        } catch (err) {\n            if (!(err instanceof Error)) {\n                console.log(\"error undefined\");\n            }\n            console.log(err);\n            const error = err instanceof Error ? err.message : \"Could not contact server\";\n            dispatch({\n                type: ActionTypes.SIGNIN_ERROR,\n                payload: { error }\n            });\n            console.log(error);\n            signinParams.toast.error(\"Login failed\");\n        }\n    }\n}\n\n\n\nexport const signup = (signupParams: AuthParams) => {\n    return async (dispatch: Dispatch<SignupActions>) => {\n        dispatch({\n            type: ActionTypes.SIGNUP_LOADING\n        });\n        try {\n            console.log(\"\");\n        } catch (err) {\n            console.log(\"TODO handle error\");\n        }\n    }\n}"],"mappings":"AAAA,SAASA,WAAT,QAA4B,iBAA5B;AAGA,SAASC,MAAM,IAAIC,WAAnB,QAAsC,WAAtC;AAEA,OAAOC,WAAP,MAAwB,aAAxB;AAYA,OAAO,MAAMF,MAAM,GAAIG,YAAD,IAA8B;EAChD,OAAO,MAAOC,QAAP,IAA6C;IAChDA,QAAQ,CAAC;MACLC,IAAI,EAAEN,WAAW,CAACO;IADb,CAAD,CAAR;;IAGA,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMN,WAAW,CAACE,YAAD,CAAlC;MACAK,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB;MACA,MAAMR,WAAW,CAACS,OAAZ,CAAoB,SAApB,EAA+BC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACG,IAAxB,CAA/B,CAAN;MACAP,YAAY,CAACW,KAAb,CAAmBC,OAAnB,CAA2B,oBAA3B;MACAZ,YAAY,CAACa,QAAb,CAAsB,GAAtB;MACAZ,QAAQ,CAAC;QACLC,IAAI,EAAEN,WAAW,CAACkB,OADb;QAELC,OAAO,EAAEX,QAAQ,CAACG;MAFb,CAAD,CAAR;IAIH,CAVD,CAUE,OAAOS,GAAP,EAAY;MACV,IAAI,EAAEA,GAAG,YAAYC,KAAjB,CAAJ,EAA6B;QACzBZ,OAAO,CAACC,GAAR,CAAY,iBAAZ;MACH;;MACDD,OAAO,CAACC,GAAR,CAAYU,GAAZ;MACA,MAAME,KAAK,GAAGF,GAAG,YAAYC,KAAf,GAAuBD,GAAG,CAACG,OAA3B,GAAqC,0BAAnD;MACAlB,QAAQ,CAAC;QACLC,IAAI,EAAEN,WAAW,CAACwB,YADb;QAELL,OAAO,EAAE;UAAEG;QAAF;MAFJ,CAAD,CAAR;MAIAb,OAAO,CAACC,GAAR,CAAYY,KAAZ;MACAlB,YAAY,CAACW,KAAb,CAAmBO,KAAnB,CAAyB,cAAzB;IACH;EACJ,CA3BD;AA4BH,CA7BM;AAiCP,OAAO,MAAMG,MAAM,GAAIC,YAAD,IAA8B;EAChD,OAAO,MAAOrB,QAAP,IAA6C;IAChDA,QAAQ,CAAC;MACLC,IAAI,EAAEN,WAAW,CAAC2B;IADb,CAAD,CAAR;;IAGA,IAAI;MACAlB,OAAO,CAACC,GAAR,CAAY,EAAZ;IACH,CAFD,CAEE,OAAOU,GAAP,EAAY;MACVX,OAAO,CAACC,GAAR,CAAY,mBAAZ;IACH;EACJ,CATD;AAUH,CAXM"},"metadata":{},"sourceType":"module"}