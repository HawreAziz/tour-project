{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport * as api from '../../api';\nimport { formatError } from \".\";\nconst initialState = {\n  loading: false,\n  error: \"\",\n  tours: [],\n  tour: null,\n  userTours: []\n};\nexport const createTour = createAsyncThunk(\"/tours/create\", async (tourParams, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  const {\n    title,\n    tags,\n    description,\n    imageFile\n  } = tourParams;\n\n  try {\n    const {\n      data\n    } = await api.createTour({\n      title,\n      tags,\n      description,\n      imageFile\n    });\n    tourParams.toast.success(\"Tour created successfully\");\n    tourParams.navigate(\"/\");\n    return data;\n  } catch (error) {\n    return rejectWithValue({\n      error: formatError(error)\n    });\n  }\n});\nexport const getTours = createAsyncThunk(\"/tours/getTours\", async function () {\n  let _ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n  let {\n    rejectWithValue\n  } = arguments.length > 1 ? arguments[1] : undefined;\n\n  try {\n    const {\n      data\n    } = await api.getTours();\n    return data.tours;\n  } catch (error) {\n    return rejectWithValue({\n      error: formatError(error)\n    });\n  }\n});\nexport const getToursByUser = createAsyncThunk(\"/tours/getToursByUser\", async (userId, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n\n  try {\n    const {\n      data\n    } = await api.getToursById(userId);\n    return data.tours;\n  } catch (error) {\n    return rejectWithValue({\n      error: formatError(error)\n    });\n  }\n});\nexport const getTour = createAsyncThunk('/tour/getTour', async (tourId, _ref3) => {\n  let {\n    rejectWithValue\n  } = _ref3;\n\n  try {\n    const {\n      data\n    } = await api.getTour(tourId);\n    return data.tour;\n  } catch (error) {\n    return rejectWithValue({\n      error: formatError(error)\n    });\n  }\n});\nexport const deleteTour = createAsyncThunk(\"/tours/deleteTour\", async (id, _ref4) => {\n  let {\n    rejectWithValue\n  } = _ref4;\n\n  try {\n    const {\n      data\n    } = await api.deleteTour(id);\n    return data;\n  } catch (error) {\n    console.log(error);\n    return rejectWithValue({\n      error: formatError(error)\n    });\n  }\n});\nconst tourSlice = createSlice({\n  name: \"Tour\",\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(createTour.pending, state => {\n      state.loading = true;\n      state.error = \"\";\n    });\n    builder.addCase(createTour.fulfilled, state => {\n      state.loading = false;\n    });\n    builder.addCase(createTour.rejected, (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      state.error = payload ? payload.error : \"Something went wrong\";\n    });\n    builder.addCase(getTours.pending, state => {\n      state.loading = true;\n      state.error = \"\";\n    });\n    builder.addCase(getTours.fulfilled, (state, _ref6) => {\n      let {\n        payload\n      } = _ref6;\n      state.loading = false;\n      state.tours = payload;\n    });\n    builder.addCase(getTours.rejected, (state, _ref7) => {\n      let {\n        payload\n      } = _ref7;\n      state.loading = false;\n      state.error = payload ? payload.error : \"Something went wrong\";\n    });\n    builder.addCase(getToursByUser.pending, state => {\n      state.loading = true;\n      state.error = \"\";\n    });\n    builder.addCase(getToursByUser.fulfilled, (state, _ref8) => {\n      let {\n        payload\n      } = _ref8;\n      state.userTours = payload;\n      state.loading = false;\n    });\n    builder.addCase(getToursByUser.rejected, (state, _ref9) => {\n      let {\n        payload\n      } = _ref9;\n      state.loading = false;\n      state.error = payload ? payload.error : \"Something went wrong\";\n    });\n    builder.addCase(deleteTour.pending, state => {\n      state.loading = true;\n      state.error = \"\";\n    });\n    builder.addCase(deleteTour.fulfilled, (state, action) => {\n      state.loading = false;\n      console.log(action);\n    });\n    builder.addCase(deleteTour.rejected, (state, _ref10) => {\n      let {\n        payload\n      } = _ref10;\n      state.loading = false;\n      state.error = payload ? payload.error : \"Something went wrong\";\n    });\n    builder.addCase(getTour.pending, state => {\n      state.loading = true;\n      state.error = \"\";\n    });\n    builder.addCase(getTour.fulfilled, (state, _ref11) => {\n      let {\n        payload\n      } = _ref11;\n      state.loading = false;\n      state.tour = payload;\n    });\n  }\n});\nexport default tourSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","formatError","initialState","loading","error","tours","tour","userTours","createTour","tourParams","rejectWithValue","title","tags","description","imageFile","data","toast","success","navigate","getTours","_","getToursByUser","userId","getToursById","getTour","tourId","deleteTour","id","console","log","tourSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","rejected","payload","action","reducer"],"sources":["/home/haziz1/react-projects/tourApp/app/client/src/states/reducers/tour-reducer.ts"],"sourcesContent":["import { ActionReducerMapBuilder, createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Tour, TourData } from \"../../../types\";\nimport * as api from '../../api';\nimport { toast } from 'react-toastify';\nimport { NavigateFunction } from 'react-router-dom';\nimport { formatError } from \".\";\nimport { NONAME } from \"dns\";\n\n\n\ninterface TourState {\n    loading: boolean;\n    error: string;\n    tours: Tour[];\n    tour: Tour | null;\n    userTours: Tour[];\n}\n\n\ninterface CreateParams extends TourData {\n    toast: typeof toast;\n    navigate: NavigateFunction;\n}\n\n\n\nconst initialState: TourState = {\n    loading: false,\n    error: \"\",\n    tours: [],\n    tour: null,\n    userTours: []\n}\n\ninterface RejectValue {\n    error: string\n}\n\n\nexport const createTour = createAsyncThunk<TourState, CreateParams, { rejectValue: RejectValue }>(\n    \"/tours/create\",\n    async (tourParams: CreateParams, { rejectWithValue }) => {\n        const { title, tags, description, imageFile } = tourParams;\n        try {\n            const { data } = await api.createTour({ title, tags, description, imageFile });\n            tourParams.toast.success(\"Tour created successfully\");\n            tourParams.navigate(\"/\");\n            return data as TourState;\n        } catch (error) {\n            return rejectWithValue({ error: formatError(error) });\n        }\n    }\n);\n\n\nexport const getTours = createAsyncThunk<Tour[], string, { rejectValue: RejectValue }>(\n    \"/tours/getTours\",\n    async (_: string = \"\", { rejectWithValue }) => {\n        try {\n            const { data } = await api.getTours();\n            return data.tours;\n        } catch (error) {\n            return rejectWithValue({ error: formatError(error) });\n        }\n    });\n\n\n\nexport const getToursByUser = createAsyncThunk<Tour[], string, { rejectValue: RejectValue }>(\n    \"/tours/getToursByUser\",\n    async (userId: string, { rejectWithValue }) => {\n        try {\n            const { data } = await api.getToursById(userId);\n            return data.tours as Tour[];\n        } catch (error) {\n            return rejectWithValue({ error: formatError(error) })\n        }\n    }\n);\n\n\nexport const getTour = createAsyncThunk<Tour, string, { rejectValue: RejectValue }>('/tour/getTour',\n    async (tourId: string, { rejectWithValue }) => {\n        try {\n            const { data } = await api.getTour(tourId);\n            return data.tour as Tour;\n        } catch (error) {\n            return rejectWithValue({ error: formatError(error) });\n        }\n    });\n\n\nexport const deleteTour = createAsyncThunk<{ message: string }, string, { rejectValue: RejectValue }>(\"/tours/deleteTour\",\n    async (id: string, { rejectWithValue }) => {\n        try {\n            const { data } = await api.deleteTour(id);\n            return data as { message: string};\n        } catch (error) {\n            console.log(error);\n            return rejectWithValue({ error: formatError(error) })\n        }\n    });\n\nconst tourSlice = createSlice({\n    name: \"Tour\",\n    initialState,\n    reducers: {},\n    extraReducers: (builder: ActionReducerMapBuilder<TourState>) => {\n        builder.addCase(createTour.pending, (state: TourState) => {\n            state.loading = true;\n            state.error = \"\";\n        });\n\n        builder.addCase(createTour.fulfilled, (state: TourState) => {\n            state.loading = false;\n        });\n\n        builder.addCase(createTour.rejected, (state: TourState, { payload }) => {\n            state.error = payload ? payload.error : \"Something went wrong\";\n        });\n\n        builder.addCase(getTours.pending, (state: TourState) => {\n            state.loading = true;\n            state.error = \"\";\n        });\n\n        builder.addCase(getTours.fulfilled, (state: TourState, { payload }) => {\n            state.loading = false;\n            state.tours = payload;\n        });\n\n        builder.addCase(getTours.rejected, (state: TourState, { payload }) => {\n            state.loading = false;\n            state.error = payload ? payload.error : \"Something went wrong\";\n        });\n\n        builder.addCase(getToursByUser.pending, (state: TourState) => {\n            state.loading = true;\n            state.error = \"\";\n        });\n\n        builder.addCase(getToursByUser.fulfilled, (state: TourState, { payload }) => {\n            state.userTours = payload;\n            state.loading = false;\n        });\n\n        builder.addCase(getToursByUser.rejected, (state: TourState, { payload }) => {\n            state.loading = false;\n            state.error = payload ? payload.error : \"Something went wrong\";\n        });\n\n        builder.addCase(deleteTour.pending, (state: TourState) => {\n            state.loading = true;\n            state.error = \"\";\n        });\n\n        builder.addCase(deleteTour.fulfilled, (state: TourState, action) => {\n            state.loading = false;\n            console.log(action);\n        });\n\n        builder.addCase(deleteTour.rejected, (state: TourState, { payload }) => {\n            state.loading = false;\n            state.error = payload ? payload.error : \"Something went wrong\";\n        });\n\n        builder.addCase(getTour.pending, (state: TourState) => {\n            state.loading = true;\n            state.error = \"\";\n        });\n\n        builder.addCase(getTour.fulfilled, (state: TourState, { payload }) => {\n            state.loading = false;\n            state.tour = payload;\n        });\n    }\n});\n\n\nexport default tourSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}